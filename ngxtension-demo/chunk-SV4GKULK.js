import{a as J,b as K}from"./chunk-BLG2YJX6.js";import{a as L}from"./chunk-HVYJ44IC.js";import{a as v}from"./chunk-N7LW4KDJ.js";import"./chunk-S4OXUUVE.js";import"./chunk-SHP4F2YS.js";import{f as q,h as z,m as G}from"./chunk-5R5WHLRE.js";import{a as k,b as N,c as $,d as P,e as V,f as W,g as j,h as H}from"./chunk-7JR3USC6.js";import"./chunk-T6GQPN3G.js";import{Ab as C,Bb as c,Ga as l,H as f,Lb as r,Mb as g,Nb as F,Pb as w,Qb as y,Rb as A,Ta as i,Xa as x,bb as T,dc as B,gb as u,k as _,pa as S,pb as M,qa as h,rb as p,sb as D,tb as b,ub as a,uc as I,vb as n,yb as E}from"./chunk-MFECIPXD.js";var Q=(e,o)=>o.id;function R(e,o){if(e&1&&(a(0,"span",4),r(1),n()),e&2){let t=c();i(),g(t.saveStatus())}}function U(e,o){if(e&1){let t=E();a(0,"div",6)(1,"span"),r(2),n(),a(3,"button",7),C("click",function(){let m=S(t).$implicit,d=c(2);return h(d.toggleTodo(m.id))}),r(4),n()()}if(e&2){let t=o.$implicit;i(),M("line-through",t.completed),i(),g(t.title),i(2),F(" ",t.completed?"\u53D6\u6D88\u5B8C\u6210":"\u6A19\u8A18\u5B8C\u6210"," ")}}function X(e,o){if(e&1&&(a(0,"div",5),D(1,U,5,4,"div",6,Q),n()),e&2){let t=c();i(),b(t.todos())}}function Y(e,o){e&1&&(a(0,"p"),r(1,"\u8F09\u5165\u4E2D..."),n())}var O=class e{constructor(o){this.dataService=o;v(this.todos,this.dataService.getTodos()),v(this.saveStatus,this.todoChanges$.pipe(f(1e3)),()=>"\u5132\u5B58\u4E2D..."),B(()=>{let t=this.todos();console.log("Todos updated:",t),this.autoSave&&(this.todoChanges$.next(),setTimeout(()=>{this.saveStatus.set("\u5DF2\u81EA\u52D5\u5132\u5B58"),setTimeout(()=>this.saveStatus.set(""),2e3)},1e3))})}todos=l([]);autoSave=!0;saveStatus=l("");todoChanges$=new _;toggleAutoSave(){this.autoSave?this.saveStatus.set("\u81EA\u52D5\u5132\u5B58\u5DF2\u958B\u555F"):this.saveStatus.set("\u81EA\u52D5\u5132\u5B58\u5DF2\u95DC\u9589"),setTimeout(()=>this.saveStatus.set(""),2e3)}toggleTodo(o){this.dataService.toggleTodo(o).subscribe(()=>{this.dataService.getTodos().subscribe(t=>this.todos.set(t))})}static \u0275fac=function(t){return new(t||e)(x(L))};static \u0275cmp=T({type:e,selectors:[["app-connect"]],decls:13,vars:3,consts:[[1,"max-w-2xl","mx-auto"],[1,"p-4"],[1,"mb-4","flex","items-center","gap-2"],[3,"ngModelChange","change","ngModel"],[1,"text-sm","text-green-600"],[1,"space-y-2"],[1,"flex","items-center","gap-2","p-2","border","rounded"],["mat-button","",3,"click"]],template:function(t,s){t&1&&(a(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),r(3,"Connect Signal Demo"),n(),a(4,"mat-card-subtitle"),r(5," \u5C55\u793A\u5982\u4F55\u4F7F\u7528 connect \u9023\u63A5 signal \u8207\u7D44\u4EF6\uFF0C\u5BE6\u73FE\u81EA\u52D5\u4FDD\u5B58\u529F\u80FD "),n()(),a(6,"mat-card-content",1)(7,"div",2)(8,"mat-slide-toggle",3),A("ngModelChange",function(d){return y(s.autoSave,d)||(s.autoSave=d),d}),C("change",function(){return s.toggleAutoSave()}),r(9," \u81EA\u52D5\u4FDD\u5B58 "),n(),u(10,R,2,1,"span",4),n(),u(11,X,3,0,"div",5)(12,Y,2,0,"p"),n()()),t&2&&(i(8),w("ngModel",s.autoSave),i(2),p(s.saveStatus()?10:-1),i(),p(s.todos()?11:12))},dependencies:[I,W,k,$,V,P,N,H,j,K,J,G,q,z],encapsulation:2})};export{O as ConnectComponent};
